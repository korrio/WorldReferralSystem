
> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

[dotenv@17.2.2] injecting env (8) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
Database connection: ‚úÖ Found
Database URL: postgresql://postgres:***@localhost:5432/worldref
[dotenv@17.2.2] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
9:00:45 AM [express] serving on port 8000
‚úÖ Database connected successfully
Session middleware - ID: Xji9oNBGEs-znFJ4_PoiwvqQSCDr-qli
Session data: {
  "cookie": {
    "originalMaxAge": 2592000000,
    "expires": "2025-10-18T02:00:54.722Z",
    "secure": false,
    "httpOnly": true,
    "path": "/",
    "sameSite": "lax"
  }
}
Looking for user with email: korr@aq1.co
Found user: 64bf95bf-ac87-4a60-916f-c8145808ca96 Thananon N. AAA99BB
9:00:54 AM [express] GET /api/debug/user/korr@aq1.co 200 in 26ms :: {"found":true,"user":{"id":"64bf‚Ä¶
Session middleware - ID: 3NIetI3TYWlaspSd2rYlOe94NzOKpvK_
Session data: {
  "cookie": {
    "originalMaxAge": 2592000000,
    "expires": "2025-10-18T02:01:02.839Z",
    "secure": false,
    "httpOnly": true,
    "path": "/",
    "sameSite": "lax"
  }
}
Google auth request: {
  uid: 'yzQ3KSK0itQW9FwKjOD6CMf9vpA3',
  email: 'korr@aq1.co',
  displayName: 'Thananon N.',
  photoURL: null,
  emailVerified: true
}
Creating/updating Google user: {
  googleUid: 'yzQ3KSK0itQW9FwKjOD6CMf9vpA3',
  email: 'korr@aq1.co',
  name: 'Thananon N.',
  photoURL: null,
  emailVerified: true,
  provider: 'google'
}
Google user exists, updating: 64bf95bf-ac87-4a60-916f-c8145808ca96
Google user saved to database: 64bf95bf-ac87-4a60-916f-c8145808ca96
Session after Google auth: {
  "cookie": {
    "originalMaxAge": 2592000000,
    "expires": "2025-10-18T02:01:02.839Z",
    "secure": false,
    "httpOnly": true,
    "path": "/",
    "sameSite": "lax"
  },
  "user": {
    "id": "64bf95bf-ac87-4a60-916f-c8145808ca96",
    "name": "Thananon N.",
    "email": "korr@aq1.co",
    "emailVerified": "2025-09-18T02:01:02.844Z",
    "image": null,
    "photoURL": null,
    "worldIdNullifierHash": null,
    "worldIdVerified": false,
    "verificationLevel": null,
    "worldIdReferralCode": null,
    "googleUid": "yzQ3KSK0itQW9FwKjOD6CMf9vpA3",
    "provider": "google",
    "createdAt": "2025-09-18T01:33:10.641Z",
    "updatedAt": "2025-09-18T02:01:02.844Z"
  }
}
Google auth session saved successfully with ID: 3NIetI3TYWlaspSd2rYlOe94NzOKpvK_
9:01:02 AM [express] POST /api/auth/google 200 in 12ms :: {"success":true,"user":{"id":"64bf95bf-ac8‚Ä¶
Session middleware - ID: 3NIetI3TYWlaspSd2rYlOe94NzOKpvK_
Session data: {
  "cookie": {
    "originalMaxAge": 2592000000,
    "expires": "2025-10-18T02:01:02.839Z",
    "secure": false,
    "httpOnly": true,
    "path": "/",
    "sameSite": "lax"
  },
  "user": {
    "id": "64bf95bf-ac87-4a60-916f-c8145808ca96",
    "name": "Thananon N.",
    "email": "korr@aq1.co",
    "emailVerified": "2025-09-18T02:01:02.844Z",
    "image": null,
    "photoURL": null,
    "worldIdNullifierHash": null,
    "worldIdVerified": false,
    "verificationLevel": null,
    "worldIdReferralCode": null,
    "googleUid": "yzQ3KSK0itQW9FwKjOD6CMf9vpA3",
    "provider": "google",
    "createdAt": "2025-09-18T01:33:10.641Z",
    "updatedAt": "2025-09-18T02:01:02.844Z"
  }
}
=== SESSION CHECK START ===
Session ID: 3NIetI3TYWlaspSd2rYlOe94NzOKpvK_
Has session object: true
Session keys: [ 'cookie', 'user' ]
Full session: {
  "cookie": {
    "originalMaxAge": 2592000000,
    "expires": "2025-10-18T02:01:02.839Z",
    "secure": false,
    "httpOnly": true,
    "path": "/",
    "sameSite": "lax"
  },
  "user": {
    "id": "64bf95bf-ac87-4a60-916f-c8145808ca96",
    "name": "Thananon N.",
    "email": "korr@aq1.co",
    "emailVerified": "2025-09-18T02:01:02.844Z",
    "image": null,
    "photoURL": null,
    "worldIdNullifierHash": null,
    "worldIdVerified": false,
    "verificationLevel": null,
    "worldIdReferralCode": null,
    "googleUid": "yzQ3KSK0itQW9FwKjOD6CMf9vpA3",
    "provider": "google",
    "createdAt": "2025-09-18T01:33:10.641Z",
    "updatedAt": "2025-09-18T02:01:02.844Z"
  }
}
Cookies: worldref.sid=s%3A3NIetI3TYWlaspSd2rYlOe94NzOKpvK_.2vkVy51KVRVbkBJ7qtKhJd4bTDg%2FcYwavUvP3nx2fcE
‚úÖ Session user found: {
  id: '64bf95bf-ac87-4a60-916f-c8145808ca96',
  name: 'Thananon N.',
  worldIdVerified: false
}
Sending session data: {
  user: {
    id: '64bf95bf-ac87-4a60-916f-c8145808ca96',
    name: 'Thananon N.',
    email: 'korr@aq1.co',
    worldIdVerified: false,
    verificationLevel: null,
    worldIdNullifierHash: null,
    worldIdReferralCode: null
  },
  expires: '2025-10-18T02:01:11.263Z'
}
=== SESSION CHECK END ===

9:01:11 AM [express] GET /api/auth/session 200 in 1ms :: {"user":{"id":"64bf95bf-ac87-4a60-916f-c814‚Ä¶
